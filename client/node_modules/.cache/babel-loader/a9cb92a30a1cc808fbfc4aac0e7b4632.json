{"ast":null,"code":"var _jsxFileName = \"/home/gabriela/Documentos/sr1-mast/client/src/HomeUser.js\";\nimport React, { Component } from 'react';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter, Form, FormGroup, Label, Input, FormText } from 'reactstrap';\nimport { Container, Row, Col } from 'reactstrap';\nimport './css/App.css';\nimport Navbar from './Navbar';\nimport File from \"./components/File\";\nimport Folder from \"./components/Folder\";\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\nimport \"mdbreact/dist/css/mdb.css\";\nimport { MDBProgress } from 'mdbreact';\n\nlet aes256 = require('aes256');\n\nlet arrFile = [];\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      childrens: [],\n      aux: \"aux\",\n      modalNewFolder: false,\n      checked: [],\n      expanded: [],\n      key: \"my passphrase;\",\n      here: {},\n      nodes: [{\n        value: 'mars',\n        label: 'Home',\n        children: [{\n          value: 'phobos',\n          label: 'Phobos'\n        }, {\n          value: 'deimos',\n          label: 'Deimos',\n          children: [{\n            value: 'phobos',\n            label: 'Phobos'\n          }, {\n            value: 'deim',\n            label: 'Deim',\n            children: [{\n              value: 'phobos',\n              label: 'Phobos'\n            }, {\n              value: 'deimo',\n              label: 'Deimos3',\n              children: []\n            }]\n          }]\n        }]\n      }]\n    };\n\n    this.inicio = async () => {\n      await this.setState({\n        nodes: [{\n          value: 'mars',\n          label: 'Home',\n          isFolder: true,\n          children: [{\n            value: 'mars1',\n            label: 'Home1',\n            isFolder: true,\n            children: []\n          }]\n        }]\n      });\n      console.log(this.state.nodes);\n    };\n\n    this.sendJson = () => {\n      fetch('api/createFolder', {\n        // Your POST endpoint\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(this.state.nodes)\n      }).then(response => response.json()).then(data => {\n        console.log(data);\n      }).catch(function () {\n        console.log(\"error in post data\");\n      });\n    };\n\n    this.search = (path, obj, target) => {\n      for (var k in obj) {\n        //console.log(\"k\",k)\n        if (obj.hasOwnProperty(k)) //si esta el atributo k en el objeto\n          if (obj[k] === target) return path + \",\" + k;else if (typeof obj[k] === \"object\") {\n            var result = this.search(path + \",\" + k, obj[k], target);\n            if (result) return result;\n          }\n      }\n\n      return false;\n    };\n\n    this.clickInLoad = () => {\n      document.getElementById(\"inputUpload\").click();\n      let UpdFile = document.getElementById(\"inputUpload\");\n      UpdFile.addEventListener('change', this.handleFileSelect, false);\n    };\n\n    this.callFile = async (value, label) => {\n      const response = await fetch('/api/getFile/' + value);\n      const body = await response.blob();\n\n      if (response.status !== 200) {\n        console.log(\"ERRORRR\");\n        alert(\"Por favor intente de nuevo\");\n      }\n\n      let key = \"my passphrase;\";\n      let fileReader = new FileReader();\n      let content;\n      let filename = label;\n\n      fileReader.onloadend = async function (e) {\n        content = aes256.decrypt(key, fileReader.result);\n        console.log(\"contentdes\", content);\n        var fileDown = [];\n        fileDown[0] = content;\n        fileDown[1] = filename;\n        await fetch('api/postForDownload', {\n          // Your POST endpoint\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            \"file\": {\n              \"content\": content,\n              \"name\": filename\n            }\n          }) // This is your file object\n\n        }).then(response => {//console.log(response.blob)\n          //download(\"hola\",'hola.txt')\n        }).catch(function () {\n          console.log(\"error in post data\");\n        }); // download(content,filename,\"js\");\n      };\n\n      fileReader.readAsText(body);\n      this.setState({\n        contentF: content\n      });\n      this.setState({\n        nameF: filename\n      });\n      console.log(filename);\n      this.downloadFile(filename);\n    };\n\n    this.downloadFile = async filename => {\n      setTimeout(function () {\n        window.open('http://localhost:5000/download/' + filename);\n      }, 1000);\n    };\n\n    this.handleFileSelect = evt => {\n      if (evt.target.files.length > 0) {\n        var files = evt.target.files; // FileList object\n\n        console.log(\"llamo\");\n        this.postContentFile(files);\n      }\n    };\n\n    this.postContentFile = async files => {\n      let flagError = false;\n      var formData = new FormData(); //formData.set('files', files);\n\n      formData.append('files', files[0]);\n      console.log(\"entro\", formData);\n      await fetch('api/postContentFile', {\n        // Your POST endpoint\n        method: 'POST',\n        body: formData // This is your file object\n\n      }).catch(function () {\n        console.log(\"error in post data\");\n        flagError = true;\n      });\n      this.getContentFile(files, flagError);\n    };\n\n    this.getContentFile = async (files, flagError) => {\n      this.setState({\n        nameF: files[0].name\n      });\n      console.log(\"name hereee\", this.state.nameF);\n      let response;\n      arrFile[0] = files[0].name;\n      sessionStorage.setItem('a', files[0].name);\n      response = await fetch('api/getContentFile?name=' + files[0].name).catch(function () {\n        console.log(\"error in get files\");\n        flagError = true;\n      });\n\n      if (response.status == 500) {\n        console.log(\"ERROR 500000000\");\n        alert(\"SERVER ERROR 500, porfavor ELIMINE el archivo e intente de nuevo o recarge la pestaNa\");\n        flagError = true;\n      } else {\n        if (!flagError) {\n          console.log(\"respuesta\", response);\n          let json = await response.json();\n          setTimeout(async () => {\n            var filename = files[0].name;\n            console.log(\"json\", json);\n            this.setState({\n              nameF: filename\n            });\n            var key = \"my passphrase;\"; // var contentEncrypted = aes256.encrypt(key, contentString);\n\n            var contentEncrypted = aes256.encrypt(key, json);\n            var nameEncrypted = aes256.encrypt(key, filename);\n\n            if (nameEncrypted.includes(\"/\")) {\n              alert(\"ERROR: por favor elimine el archivo recien subido he intentelo de nuevo. Razon: hay un slash en el value\");\n            }\n\n            setTimeout(function () {\n              //nameEncrypted = nameEncrypted.toString().replace(\":\", \"\\/\");\n              //\n\n              /* create file encrypt */\n              fetch('api/file1/', {\n                // Your POST endpoint\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  \"file\": {\n                    \"content\": contentEncrypted,\n                    \"name\": nameEncrypted\n                  }\n                }) // This is your file object\n\n              }).catch(function () {\n                console.log(\"error in post data\");\n                flagError = true;\n              });\n              this.setState({\n                nameEncrypted: nameEncrypted\n              });\n            }.bind(this), 1000);\n          }, 600);\n        }\n      }\n    };\n\n    this.selected = clicked => {\n      if (clicked.isParent) {\n        this.setState({\n          childrens: clicked.children\n        });\n        var objHere = {};\n\n        for (var i = 0; i < clicked.parent.children.length; i++) {\n          if (clicked.parent.children[i].value === clicked.value) {\n            //find parent element\n            objHere = clicked.parent.children[i].value;\n          }\n        }\n\n        this.setState({\n          here: objHere\n        });\n      } else {\n        console.log(\"hoja\");\n      }\n    };\n\n    this.clickInNewFolder = () => {\n      this.setState(prevState => ({\n        modalNewFolder: !prevState.modalNewFolder\n      }));\n    };\n\n    this.createFolder = () => {\n      var newName = document.getElementById(\"newFolder\").value;\n      this.setState(prevState => ({\n        modalNewFolder: !prevState.modalNewFolder\n      }));\n      var path = \"nodes\";\n      console.log(\"AQUI PRUEBA\", this.state.nodes);\n      path = this.search(path, this.state.nodes, this.state.here);\n      let newObj = {\n        value: aes256.encrypt(this.state.key, newName),\n        label: newName,\n        isFolder: true,\n        children: []\n      };\n      let flagFolderHome = false;\n      console.log(\"path\", path);\n      console.log(\"newobj\", newObj);\n      path = path.replace(\"['value']\", \"\");\n      path = path.replace(\"nodes,0,\", \"\");\n\n      if (path.includes('nodes,0')) {\n        flagFolderHome = true;\n      }\n\n      console.log(\"path2\", path);\n      var auxSubPaths = path.split(',');\n      console.log(\"auxSubPaths\", auxSubPaths);\n      var subPaths = \"\";\n      var x = 0;\n\n      for (var i = 0; i < auxSubPaths.length; i++) {\n        if (/^\\d+$/.test(auxSubPaths[i + 1])) {\n          if (i === 0) {\n            subPaths = auxSubPaths[i] + \"[\" + auxSubPaths[i + 1] + \"]\";\n          } else {\n            subPaths = subPaths + \".\" + auxSubPaths[i] + \"[\" + auxSubPaths[i + 1] + \"]\";\n          }\n\n          i++;\n          x++;\n        } //if string is num\n\n      }\n\n      var data = this.state.nodes[0];\n      console.log(\"subpth\", subPaths);\n\n      if (flagFolderHome) {\n        eval(\"data.children[data.children.length]= newObj\");\n      } else {\n        eval(\"data.\" + subPaths + \".children[data.\" + subPaths + \".children.length]= newObj\");\n      } //this.setState({nodes:data})\n\n\n      setTimeout(function () {\n        this.saveJson();\n      }.bind(this), 3000);\n    };\n\n    this.changeHere = children => {\n      console.log(\"childrenhere\", children);\n      this.setState({\n        here: children\n      });\n    };\n\n    this.clickInBefore = () => {\n      var path = \"nodes\";\n      path = this.search(path, this.state.nodes, this.state.here);\n      let flagHome = false;\n      console.log(\"path\", path);\n      let flagFolderHome = false;\n      path = path.replace(\"['value']\", \"\");\n      path = path.replace(\"nodes,0,\", \"\");\n\n      if (path.includes('nodes,0')) {\n        flagFolderHome = true;\n      }\n\n      console.log(\"path2\", path);\n      path = path.replace(\"nodes,\", \"\");\n      var auxSubPaths = path.split(',');\n      var subPaths = \"\";\n      var x = 0;\n\n      for (var i = 0; i < auxSubPaths.length; i++) {\n        if (/^\\d+$/.test(auxSubPaths[i + 1])) {\n          if (i === 0) {\n            subPaths = auxSubPaths[i] + \"[\" + auxSubPaths[i + 1] + \"]\";\n          } else {\n            subPaths = subPaths + \".\" + auxSubPaths[i] + \"[\" + auxSubPaths[i + 1] + \"]\";\n          } //var newName = document.getElementById(\"newFolder\").value;\n\n\n          i++;\n          x++;\n        } //if string is num\n\n      }\n\n      console.log(\"NODESSS\", this.state.nodes[0]);\n      console.log(\"SubPaths\", subPaths);\n      var arr = subPaths.split(\".\");\n      subPaths = \"\";\n      console.log(\"arrr\", arr);\n\n      if (flagFolderHome) {\n        flagHome = true;\n        alert(\"Estas en el home\");\n      } else {\n        for (var i = 0; i < arr.length - 1; i++) {\n          if (i === 0) {\n            console.log(\"PASEEEE\");\n            subPaths = subPaths.concat(arr[i]);\n          } else {\n            subPaths = subPaths.concat(\".\" + arr[i]);\n          }\n        }\n\n        console.log(\"SUBPATHSSSSSSS\", subPaths);\n\n        if (arr.length == 1) {\n          eval(\"this.setState({here:this.state.nodes[0]})\");\n        } else {\n          eval(\"this.setState({here:this.state.nodes[0].\" + subPaths + \"})\");\n        }\n      }\n\n      console.log(\"SubPaths2\", subPaths);\n    };\n\n    this.saveJson = async children => {\n      let msj = aes256.encrypt(this.state.key, JSON.stringify(this.state.nodes));\n      console.log(\"msj\", msj);\n      await fetch('api/file1/', {\n        // Your POST endpoint\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          \"file\": {\n            \"content\": msj,\n            \"name\": \"kYS1cBJ6oqukp0KTeDScD7XHvh5WJF36nDk=\"\n          }\n        }) // This is your file object\n\n      }).catch(function () {\n        console.log(\"error in post data\");\n        alert(\"recargue la pagina por favor\");\n      });\n    };\n\n    this.listChildren = (childrenHere, arr) => {\n      console.log(\"child\", childrenHere); //console.log(\"PRUEBA\",childrenHere.children)\n\n      if (childrenHere.children !== \"undefined\") {\n        for (var i = 0; i < childrenHere.length; i++) {\n          console.log(\"purueba if\", childrenHere[i].children === 'undefined');\n\n          if (childrenHere[i].isFolder === true) {\n            //is folder\n            console.log(\"isfolder\");\n            console.log(\"PRUEBA\", childrenHere[i].children);\n            this.listChildren(childrenHere[i].children, arr);\n          } else {\n            arr.push(childrenHere[i].value);\n          }\n        }\n      } else {\n        console.log(\"here22\", childrenHere);\n        arr.push(childrenHere.value);\n      }\n\n      return arr;\n    };\n\n    this.deleteElement = (valueFile, isFolder) => {\n      let childrenHere = this.state.here.children;\n      let children;\n      var arrToDelete = [];\n\n      for (var i = 0; i < childrenHere.length; i++) {\n        if (childrenHere[i].value === valueFile) {\n          children = i;\n        }\n      }\n\n      if (isFolder) {\n        this.setState({\n          listOfChildren: []\n        });\n        arrToDelete = this.listChildren(childrenHere[children].children, []);\n      } else {\n        arrToDelete[0] = valueFile;\n      }\n\n      var path = \"nodes\";\n      path = this.search(path, this.state.nodes, this.state.here);\n      let flagFolderHome = false;\n      console.log(\"path\", path);\n      path = path.replace(\"['value']\", \"\");\n      path = path.replace(\"nodes,0,\", \"\");\n\n      if (path.includes('nodes,0')) {\n        flagFolderHome = true;\n      }\n\n      console.log(\"path2\", path);\n      var auxSubPaths = path.split(',');\n      console.log(\"auxSubPaths\", auxSubPaths);\n      var subPaths = \"\";\n      var x = 0;\n\n      for (var i = 0; i < auxSubPaths.length; i++) {\n        if (/^\\d+$/.test(auxSubPaths[i + 1])) {\n          if (i === 0) {\n            subPaths = auxSubPaths[i] + \"[\" + auxSubPaths[i + 1] + \"]\";\n          } else {\n            subPaths = subPaths + \".\" + auxSubPaths[i] + \"[\" + auxSubPaths[i + 1] + \"]\";\n          }\n\n          i++;\n          x++;\n        } //if string is num\n\n      }\n\n      var data = this.state.nodes[0];\n      console.log(\"subpth\", subPaths);\n\n      if (flagFolderHome) {\n        eval(\"data.children[children]= {}\");\n      } else {\n        eval(\"data.\" + subPaths + \".children[children]= {}\");\n      }\n\n      this.clickInNewFolder();\n      this.clickInNewFolder();\n      setTimeout(function () {\n        this.saveJson();\n      }.bind(this), 3000);\n      console.log(\"arrToDelete\", arrToDelete);\n      fetch('/api/deleteFile', {\n        // Your POST endpoint\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(arrToDelete)\n      }).then(response => response.json()).then(data => {\n        console.log(data);\n      }).catch(function () {\n        console.log(\"error in post data\");\n      });\n    };\n\n    this.paste = async () => {\n      console.log(\"paste\");\n      var path = \"nodes\";\n      path = this.search(path, this.state.nodes, this.state.here);\n      let flagFolderHome = false;\n      console.log(\"path\", path);\n      path = path.replace(\"['value']\", \"\");\n      path = path.replace(\"nodes,0,\", \"\");\n\n      if (path.includes('nodes,0')) {\n        flagFolderHome = true;\n      }\n\n      console.log(\"path2\", path);\n      var auxSubPaths = path.split(',');\n      console.log(\"auxSubPaths\", auxSubPaths);\n      var subPaths = \"\";\n      var x = 0;\n\n      for (var i = 0; i < auxSubPaths.length; i++) {\n        if (/^\\d+$/.test(auxSubPaths[i + 1])) {\n          if (i === 0) {\n            subPaths = auxSubPaths[i] + \"[\" + auxSubPaths[i + 1] + \"]\";\n          } else {\n            subPaths = subPaths + \".\" + auxSubPaths[i] + \"[\" + auxSubPaths[i + 1] + \"]\";\n          }\n\n          i++;\n          x++;\n        } //if string is num\n\n      } //var data = this.state.nodes[0];\n\n\n      var data = JSON.stringify(this.state.nodes);\n      console.log(\"DATAAA\", data);\n      console.log(\"PORTAPEEELLL\", this.state.portaPapel);\n      console.log(\"subpth\", subPaths);\n      var data2 = JSON.parse(data);\n      console.log(\"DATA22\", data2);\n      var here2;\n\n      if (flagFolderHome) {\n        eval(\"data2[0].children[data2[0].children.length]= this.state.portaPapel\");\n        eval(\"this.setState({here:data2[0]})\");\n      } else {\n        eval(\"data2[0].\" + subPaths + \".children[data2[0].\" + subPaths + \".children.length]= this.state.portaPapel\");\n        eval(\"this.setState({here:data2[0].\" + subPaths + \"})\");\n      }\n\n      console.log(data2); //await this.setState({here:here2})\n\n      console.log(\"HEREE 22\", this.state.here);\n      await this.setState({\n        nodes: data2\n      });\n      console.log(\"NODEESSS UPD\", this.state.nodes);\n    };\n\n    this.copyElement = element => {\n      console.log(\"HOLA VALE\", element); //element.value=\"copied\";\n\n      this.setState({\n        portaPapel: element\n      });\n    };\n\n    this.editName = (valueFile, newName) => {\n      var childrens = this.state.here.children;\n      var numChildren = 0;\n\n      for (var i = 0; i < childrens.length; i++) {\n        if (childrens[i].value === valueFile) {\n          numChildren = i;\n        }\n      }\n\n      console.log(\"numChildren\", numChildren);\n      console.log(\"newname\", newName);\n      var path = \"nodes\";\n      path = this.search(path, this.state.nodes, this.state.here);\n      let flagFolderHome = false;\n      console.log(\"path\", path);\n      path = path.replace(\"['value']\", \"\");\n      path = path.replace(\"nodes,0,\", \"\");\n\n      if (path.includes('nodes,0')) {\n        flagFolderHome = true;\n      }\n\n      console.log(\"path2\", path);\n      var auxSubPaths = path.split(',');\n      console.log(\"auxSubPaths\", auxSubPaths);\n      var subPaths = \"\";\n      var x = 0;\n\n      for (var i = 0; i < auxSubPaths.length; i++) {\n        if (/^\\d+$/.test(auxSubPaths[i + 1])) {\n          if (i === 0) {\n            subPaths = auxSubPaths[i] + \"[\" + auxSubPaths[i + 1] + \"]\";\n          } else {\n            subPaths = subPaths + \".\" + auxSubPaths[i] + \"[\" + auxSubPaths[i + 1] + \"]\";\n          }\n\n          i++;\n          x++;\n        } //if string is num\n\n      }\n\n      var data = this.state.nodes[0];\n      console.log(\"subpth\", subPaths);\n\n      if (flagFolderHome) {\n        eval(\"data.children[numChildren].label= newName\");\n      } else {\n        eval(\"data.\" + subPaths + \".children[numChildren].label= newName\");\n      }\n\n      this.clickInNewFolder();\n      this.clickInNewFolder();\n      setTimeout(function () {\n        this.saveJson();\n      }.bind(this), 3000);\n    };\n\n    this.uploadFile = async () => {\n      await this.clickInLoad();\n      setTimeout(function () {\n        var path = \"nodes\";\n        path = this.search(path, this.state.nodes, this.state.here);\n        var nameEncrypted = this.state.nameEncrypted;\n        var nameF = this.state.nameF;\n        console.log(\"NAMEEE\", this.state.nameF);\n        let newObj = {\n          value: nameEncrypted,\n          label: nameF,\n          isFolder: false\n        };\n        let flagFolderHome = false;\n        console.log(\"path\", path);\n        console.log(\"newobj\", newObj);\n        path = path.replace(\"['value']\", \"\");\n        path = path.replace(\"nodes,0,\", \"\");\n\n        if (path.includes('nodes,0')) {\n          flagFolderHome = true;\n        }\n\n        console.log(\"path2\", path);\n        var auxSubPaths = path.split(',');\n        console.log(\"auxSubPaths\", auxSubPaths);\n        var subPaths = \"\";\n        var x = 0;\n\n        for (var i = 0; i < auxSubPaths.length; i++) {\n          if (/^\\d+$/.test(auxSubPaths[i + 1])) {\n            if (i === 0) {\n              subPaths = auxSubPaths[i] + \"[\" + auxSubPaths[i + 1] + \"]\";\n            } else {\n              subPaths = subPaths + \".\" + auxSubPaths[i] + \"[\" + auxSubPaths[i + 1] + \"]\";\n            }\n\n            i++;\n            x++;\n          } //if string is num\n\n        }\n\n        var data = this.state.nodes[0];\n        console.log(\"subpth\", subPaths);\n\n        if (flagFolderHome) {\n          eval(\"data.children[data.children.length]= newObj\");\n        } else {\n          eval(\"data.\" + subPaths + \".children[data.\" + subPaths + \".children.length]= newObj\");\n        }\n\n        this.clickInNewFolder();\n        this.clickInNewFolder(); //this.setState({nodes:data})\n\n        setTimeout(function () {\n          this.saveJson();\n        }.bind(this), 3000);\n      }.bind(this), 5000);\n    };\n\n    this.callJSON = async () => {\n      const response = await fetch('/api/getFile/kYS1cBJ6oqukp0KTeDScD7XHvh5WJF36nDk=');\n      const body = await response.blob();\n\n      if (response.status !== 200) {\n        console.log(\"ERRORRR\");\n        alert(\"Por favor intente de nuevo\");\n      }\n\n      let key = \"my passphrase;\";\n      let fileReader = new FileReader();\n      let content;\n\n      fileReader.onloadend = async function (e) {\n        content = aes256.decrypt(key, fileReader.result);\n        console.log(\"contentdes\", JSON.parse(content));\n        console.log(\"nodes\", this.state.nodes);\n        var fileDown = [];\n        this.setState({\n          nodes: JSON.parse(content)\n        });\n        console.log(\"nodes\", this.state.nodes);\n        fileDown[0] = content;\n        this.setState({\n          here: this.state.nodes[0]\n        });\n        this.clickInNewFolder();\n        this.clickInNewFolder(); // download(content,filename,\"js\");\n      }.bind(this);\n\n      fileReader.readAsText(body);\n    };\n  }\n\n  componentWillMount() {\n    console.log(\"this.state.nodes[0]\");\n    this.setState({\n      here: this.state.nodes[0]\n    });\n  }\n\n  componentDidMount() {\n    //this.inicio()\n    fetch('/folder', {\n      // Your POST endpoint\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify([\"h\", \"h\"])\n    }).then(response => response.json()).then(data => {\n      console.log(data);\n    }).catch(function () {\n      console.log(\"error in post data\");\n    });\n    this.callJSON(); // console.log(JSON.stringify(this.state.nodes[0]))\n    // fetch('api/prueba', { // Your POST endpoint\n    //   method: 'POST',\n    //   headers: {'Content-Type': 'application/json'},\n    //   body: JSON.stringify(this.state.nodes)\n    //   })\n    //   .then((response) => response.json())\n    //   .then((data) => {console.log(data)})\n    //   .catch(function() {\n    //     console.log(\"error in post data\");\n    //   });\n  }\n\n  render() {\n    const childrenFolder = [];\n    const childrenFile = [];\n    var flagEmpty = false;\n    console.log(\"here\", this.state.here);\n    let auxChildren = this.state.here.children;\n\n    for (var i = 0; i < auxChildren.length; i += 1) {\n      if (typeof auxChildren[i].children !== \"undefined\") {\n        // ES PADRE (Carpeta)\n        childrenFolder.push(React.createElement(Col, {\n          key: i,\n          className: \"nodeCard \",\n          sm: \"8\",\n          md: \"3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 777\n          },\n          __self: this\n        }, React.createElement(Folder, {\n          number: i,\n          children: auxChildren[i],\n          labelFile: auxChildren[i].label,\n          valueFile: auxChildren[i].label,\n          changeHere: this.changeHere,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 777\n          },\n          __self: this\n        })));\n        flagEmpty = true;\n      } else {\n        //Es un file\n        childrenFile.push(React.createElement(Col, {\n          key: i,\n          className: \"nodeCard \",\n          sm: \"8\",\n          md: \"3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 784\n          },\n          __self: this\n        }, React.createElement(File, {\n          number: i,\n          labelFile: auxChildren[i].label,\n          valueFile: auxChildren[i].label,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 784\n          },\n          __self: this\n        })));\n        flagEmpty = true;\n      }\n    }\n\n    ;\n\n    if (!flagEmpty) {\n      childrenFolder.push(React.createElement(\"h2\", {\n        key: \"empty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 791\n        },\n        __self: this\n      }, \"Folder Empty\"));\n    }\n\n    childrenFolder.push(childrenFile);\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 798\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 800\n      },\n      __self: this\n    }), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 802\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 803\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"md-form mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 804\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"md-form my-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 805\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-control mr-sm-2\",\n      type: \"text\",\n      placeholder: \"Search\",\n      \"aria-label\": \"Search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 806\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"md-form mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 810\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"far fa-clock\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 812\n      },\n      __self: this\n    }, \" \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 812\n      },\n      __self: this\n    }, \"Recent\"))), React.createElement(\"div\", {\n      className: \"md-form mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 816\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-star\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 817\n      },\n      __self: this\n    }, \" Destacada\")), React.createElement(\"div\", {\n      className: \"md-form mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 820\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-trash-alt\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 821\n      },\n      __self: this\n    }, \" Papelera\")), React.createElement(\"hr\", {\n      className: \"my-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 823\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"md-form mb-3 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 824\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-server\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 825\n      },\n      __self: this\n    }, \"  Storage\"), React.createElement(MDBProgress, {\n      value: 25,\n      className: \"my-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 826\n      },\n      __self: this\n    }), \"398.8 Mb of 5G used\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 827\n      },\n      __self: this\n    }), React.createElement(\"a\", {\n      className: \"color\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 828\n      },\n      __self: this\n    }, \" Increase storage\"))), React.createElement(Col, {\n      sm: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 831\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 832\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"light-blue\",\n      className: \"boton2\",\n      onClick: this.clickInNewFolder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 833\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-folder-plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 833\n      },\n      __self: this\n    }), \" Create Folder\"), React.createElement(Button, {\n      color: \"light-blue\",\n      className: \"boton\",\n      onClick: this.saveJson,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 834\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-save\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 834\n      },\n      __self: this\n    }), \" Paste\"), React.createElement(Button, {\n      color: \"light-blue\",\n      className: \"boton\",\n      onClick: this.saveJson,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 835\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-file-upload\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 835\n      },\n      __self: this\n    }), \" File upload\"), React.createElement(Button, {\n      color: \"light-blue\",\n      className: \"boton\",\n      onClick: this.clickInBefore,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 836\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-undo-alt\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 836\n      },\n      __self: this\n    }), \" Back\"), React.createElement(Col, {\n      xs: \"12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 848\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 849\n      },\n      __self: this\n    }, childrenFolder))))), React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 857\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      isOpen: this.state.modalNewFolder,\n      toggle: this.clickInNewFolder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 860\n      },\n      __self: this\n    }, React.createElement(ModalHeader, {\n      toggle: this.clickInNewFolder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 861\n      },\n      __self: this\n    }, \"Create Folder\"), React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 862\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 863\n      },\n      __self: this\n    }, React.createElement(Label, {\n      for: \"newFolder\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 864\n      },\n      __self: this\n    }, \"Name of folder:\"), React.createElement(Input, {\n      type: \"text\",\n      name: \"newFolder\",\n      id: \"newFolder\",\n      placeholder: \"New name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 865\n      },\n      __self: this\n    }))), React.createElement(ModalFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 868\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"boton\",\n      color: \"primary\",\n      onClick: this.createFolder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 869\n      },\n      __self: this\n    }, \"Create\"), ' ', React.createElement(Button, {\n      className: \"boton\",\n      color: \"secondary\",\n      onClick: this.clickInNewFolder,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 870\n      },\n      __self: this\n    }, \"Cancel\"))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 876\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 877\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 878\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 879\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 880\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 881\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 882\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 883\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 884\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 885\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 886\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 887\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 888\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 889\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 890\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 891\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 892\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 893\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 894\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 895\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 896\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 897\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 898\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 899\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 900\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 901\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 902\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 903\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 904\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 905\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 906\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 907\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 908\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 909\n      },\n      __self: this\n    }), React.createElement(Button, {\n      className: \"boton\",\n      onClick: this.clickInLoad,\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 910\n      },\n      __self: this\n    }, \"primary\"), ' ', React.createElement(\"input\", {\n      type: \"file\",\n      id: \"inputUpload\",\n      name: \"files[]\",\n      multiple: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 911\n      },\n      __self: this\n    }), React.createElement(Button, {\n      onClick: this.callFile,\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 913\n      },\n      __self: this\n    }, \"call file\"), ' '));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/gabriela/Documentos/sr1-mast/client/src/HomeUser.js"],"names":["React","Component","Button","Modal","ModalHeader","ModalBody","ModalFooter","Form","FormGroup","Label","Input","FormText","Container","Row","Col","Navbar","File","Folder","MDBProgress","aes256","require","arrFile","App","state","childrens","aux","modalNewFolder","checked","expanded","key","here","nodes","value","label","children","inicio","setState","isFolder","console","log","sendJson","fetch","method","headers","body","JSON","stringify","then","response","json","data","catch","search","path","obj","target","k","hasOwnProperty","result","clickInLoad","document","getElementById","click","UpdFile","addEventListener","handleFileSelect","callFile","blob","status","alert","fileReader","FileReader","content","filename","onloadend","e","decrypt","fileDown","readAsText","contentF","nameF","downloadFile","setTimeout","window","open","evt","files","length","postContentFile","flagError","formData","FormData","append","getContentFile","name","sessionStorage","setItem","contentEncrypted","encrypt","nameEncrypted","includes","bind","selected","clicked","isParent","objHere","i","parent","clickInNewFolder","prevState","createFolder","newName","newObj","flagFolderHome","replace","auxSubPaths","split","subPaths","x","test","eval","saveJson","changeHere","clickInBefore","flagHome","arr","concat","msj","listChildren","childrenHere","push","deleteElement","valueFile","arrToDelete","listOfChildren","paste","portaPapel","data2","parse","here2","copyElement","element","editName","numChildren","uploadFile","callJSON","componentWillMount","componentDidMount","render","childrenFolder","childrenFile","flagEmpty","auxChildren"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter , Form, FormGroup, Label, Input, FormText  } from 'reactstrap';\nimport { Container, Row, Col } from 'reactstrap';\nimport './css/App.css';\nimport Navbar from './Navbar';\nimport File from \"./components/File\"\nimport Folder from \"./components/Folder\"\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\nimport \"mdbreact/dist/css/mdb.css\";\nimport { MDBProgress } from 'mdbreact';\n\nlet aes256 = require('aes256');\nlet arrFile = []\nclass App extends Component {\n  state = {\n    childrens: [],\n    aux:\"aux\",\n    modalNewFolder: false,\n    checked: [],\n    expanded: [],\n    key: \"my passphrase;\",\n    here: {},\n    nodes :[{\n      value: 'mars',\n      label: 'Home',\n      children: [\n        { \n        value: 'phobos', \n        label: 'Phobos' \n        },\n        { \n         value: 'deimos', \n         label: 'Deimos' ,\n         children: [\n          { \n          value: 'phobos', \n          label: 'Phobos' \n          },\n          { \n           value: 'deim', \n           label: 'Deim' ,\n           children: [\n            { \n            value: 'phobos', \n            label: 'Phobos' \n            },\n            { \n             value: 'deimo', \n             label: 'Deimos3',\n             children: []\n             \n            }\n          ]\n           \n          }\n        ]\n        }\n      ]\n    }]\n  };\n  componentWillMount() {\n    console.log(\"this.state.nodes[0]\")\n    this.setState({here:this.state.nodes[0]});\n  }\n\n  inicio = async () => {\n    await this.setState({nodes: [{ value: 'mars',\n    label: 'Home',\n    isFolder:true,\n    children: [\n      { value: 'mars1',\n    label: 'Home1',\n    isFolder:true,\n    children: [\n      \n    ]  \n    }\n    ]  \n    }]})\n    console.log(this.state.nodes)\n  }\n\n\n  componentDidMount() {\n    //this.inicio()\n    fetch('/folder', { // Your POST endpoint\n     method: 'POST',\n     headers: {'Content-Type': 'application/json'},\n     body: JSON.stringify([\"h\",\"h\"])\n     })\n     .then((response) => response.json())\n     .then((data) => {console.log(data)})\n     .catch(function() {\n       console.log(\"error in post data\");\n     });\n     this.callJSON()\n     // console.log(JSON.stringify(this.state.nodes[0]))\n     // fetch('api/prueba', { // Your POST endpoint\n     //   method: 'POST',\n     //   headers: {'Content-Type': 'application/json'},\n     //   body: JSON.stringify(this.state.nodes)\n     //   })\n     //   .then((response) => response.json())\n     //   .then((data) => {console.log(data)})\n     //   .catch(function() {\n     //     console.log(\"error in post data\");\n     //   });\n     \n    \n   }\n\n   sendJson = () => {\n    fetch('api/createFolder', { // Your POST endpoint\n      method: 'POST',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify(this.state.nodes)\n      })\n      .then((response) => response.json())\n      .then((data) => {console.log(data)})\n      .catch(function() {\n        console.log(\"error in post data\");\n      });\n  \n   }\n  \n\n \n   search = (path, obj, target) => {\n    for (var k in obj) {\n      //console.log(\"k\",k)\n        if (obj.hasOwnProperty(k))//si esta el atributo k en el objeto\n            if (obj[k] === target)\n                return path + \",\" + k \n            else if (typeof obj[k] === \"object\") {\n                var result = this.search(path + \",\" + k , obj[k], target);\n                if (result)\n                    return result;\n            }\n    }\n    return false;\n}\n\nclickInLoad = () => {\n  document.getElementById(\"inputUpload\").click();\n  let UpdFile = document.getElementById(\"inputUpload\");\n  UpdFile.addEventListener('change',this.handleFileSelect, false);\n}\n\n\ncallFile = async (value,label) => {\n  const response = await fetch('/api/getFile/'+value);\n  const body = await response.blob();\n  if (response.status !== 200){\n    console.log(\"ERRORRR\")\n    alert(\"Por favor intente de nuevo\")\n  }\n  let key = \"my passphrase;\"\n  let fileReader = new FileReader();\n  let content;\n  let filename=label;\n  fileReader.onloadend =  async function  (e){\n\n     content = aes256.decrypt(key,fileReader.result);\n    console.log(\"contentdes\", content);\n    var fileDown =[];\n    \n    fileDown[0]=content;\n    fileDown[1]=filename;\n\n      await fetch('api/postForDownload', { // Your POST endpoint\n      method: 'POST',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify({ \"file\": {\n        \"content\" : content,\n        \"name\" : filename\n      }}) // This is your file object\n      }).then(response =>{\n        //console.log(response.blob)\n        //download(\"hola\",'hola.txt')\n       \n      })\n      .catch(function() {\n        console.log(\"error in post data\");\n      });\n   // download(content,filename,\"js\");\n      \n  }\n  fileReader.readAsText(body);\n  this.setState({contentF:content})\n  this.setState({nameF:filename})\n  console.log(filename)\n  this.downloadFile(filename);\n};\n\ndownloadFile  = async (filename) => {\n  setTimeout(function() {\n    window.open('http://localhost:5000/download/'+filename)  \n}, 1000);\n \n}\n\nhandleFileSelect = (evt) => {\n  if(evt.target.files.length>0){\n    var files = evt.target.files; // FileList object\n    console.log(\"llamo\")\n    this.postContentFile(files);\n    \n  }\n}\npostContentFile = async (files) =>{\n  let flagError=false;\n  \n    var formData = new FormData();\n    //formData.set('files', files);\n    \n    formData.append('files', files[0]);\n    console.log(\"entro\", formData)\n    await fetch('api/postContentFile', { // Your POST endpoint\n    method: 'POST',\n    body: formData // This is your file object\n    }).catch(function() {\n      console.log(\"error in post data\");\n      flagError=true;\n    });\n  \n  this.getContentFile(files,flagError);\n}\n\n\ngetContentFile = async (files,flagError) =>{\n  this.setState({nameF:files[0].name})\n  console.log(\"name hereee\",this.state.nameF)\n  let response;\n  arrFile[0] = files[0].name;\n  sessionStorage.setItem('a', files[0].name);\n   response = await fetch('api/getContentFile?name='+files[0].name).catch(function() {\n    console.log(\"error in get files\");\n    flagError=true;\n    });\n    if(response.status == 500){\n      console.log(\"ERROR 500000000\")\n      alert(\"SERVER ERROR 500, porfavor ELIMINE el archivo e intente de nuevo o recarge la pestaNa\")\n      flagError=true;\n    }else{\n      if(!flagError){\n        console.log(\"respuesta\",response)\n      let json = await response.json();\n\n     \n         setTimeout(async () => {\n          var filename = files[0].name;\n          console.log(\"json\",json)\n          this.setState({nameF:filename});\n          var key = \"my passphrase;\"\n          // var contentEncrypted = aes256.encrypt(key, contentString);\n          var contentEncrypted = aes256.encrypt(key, json)\n          var nameEncrypted = aes256.encrypt(key, filename);\n\n         \n            if(nameEncrypted.includes(\"/\")){\n              alert(\"ERROR: por favor elimine el archivo recien subido he intentelo de nuevo. Razon: hay un slash en el value\")\n              \n            }\n          \n\n          setTimeout( \n            function() {\n              \n\n              //nameEncrypted = nameEncrypted.toString().replace(\":\", \"\\/\");\n              //\n              /* create file encrypt */\n               fetch('api/file1/', { // Your POST endpoint\n                method: 'POST',\n                headers: {'Content-Type': 'application/json'},\n                body: JSON.stringify({ \"file\": {\n                  \"content\" : contentEncrypted,\n                  \"name\" : nameEncrypted\n                }})  // This is your file object\n              }).catch(function() {\n                console.log(\"error in post data\");\n                flagError=true;\n              });\n              this.setState({nameEncrypted:nameEncrypted})\n            }\n            .bind(this),\n            1000\n          ); \n          \n          \n        }, 600);\n      }\n    }\n    \n}\nselected = (clicked) => {\n  if(clicked.isParent){\n    this.setState({childrens:clicked.children});\n    var objHere = {}\n    for (var i =0; i<clicked.parent.children.length; i++){\n      if (clicked.parent.children[i].value === clicked.value){ //find parent element\n        objHere=clicked.parent.children[i].value;\n      }\n    }\n    this.setState({here:objHere});\n  }else{\n    console.log(\"hoja\")\n  }\n}\nclickInNewFolder= () => {\n  this.setState(prevState => ({\n    modalNewFolder: !prevState.modalNewFolder\n  }));\n}\n\ncreateFolder= () => {\n  var newName = document.getElementById(\"newFolder\").value;\n  this.setState(prevState => ({\n    modalNewFolder: !prevState.modalNewFolder\n  }));\n  var path = \"nodes\";\n  console.log(\"AQUI PRUEBA\",this.state.nodes )\n  path = this.search(path, this.state.nodes, this.state.here);\n  let newObj = {\n    value: aes256.encrypt(this.state.key, newName),\n    label: newName,\n    isFolder:true,\n    children: []\n  }\n  let flagFolderHome = false;\n  console.log(\"path\",path)\n  console.log(\"newobj\", newObj)\n  path = path.replace(\"['value']\",\"\");\n  path = path.replace(\"nodes,0,\",\"\");\n  if(path.includes('nodes,0')){\n    flagFolderHome=true;\n  }\n  console.log(\"path2\",path)\n  var auxSubPaths= path.split(',')\n  console.log(\"auxSubPaths\",auxSubPaths)\n  var subPaths = \"\"\n  var x=0;\n   for(var i=0; i<auxSubPaths.length;i++){\n    if(/^\\d+$/.test(auxSubPaths[i+1])){\n      if(i===0){\n        subPaths=auxSubPaths[i]+\"[\"+auxSubPaths[i+1]+\"]\"\n      }else{\n        subPaths=subPaths+\".\"+auxSubPaths[i]+\"[\"+auxSubPaths[i+1]+\"]\"\n      }      \n      i++;\n      x++;\n    } //if string is num\n   }\n\n    var data = this.state.nodes[0];\n    console.log(\"subpth\", subPaths)\n    if(flagFolderHome){\n      eval(\"data.children[data.children.length]= newObj\")\n    }else{\n      eval(\"data.\"+subPaths+\".children[data.\"+subPaths+\".children.length]= newObj\")\n    }\n    //this.setState({nodes:data})\n\n    setTimeout( \n      function() {\n      this.saveJson()\n      }\n      .bind(this),\n      3000\n    ); \n\n}\n\n\nchangeHere= (children) => {\n  console.log(\"childrenhere\", children)\n this.setState({here:children})\n}\n\n \nclickInBefore = () => {\n  var path = \"nodes\";\n  path = this.search(path, this.state.nodes, this.state.here);\n  let flagHome=false;\n  console.log(\"path\",path)\n  let flagFolderHome = false;\n  path = path.replace(\"['value']\",\"\");\n  path = path.replace(\"nodes,0,\",\"\");\n  if(path.includes('nodes,0')){\n    flagFolderHome=true;\n  }\n  console.log(\"path2\",path)\n  path = path.replace(\"nodes,\",\"\");\n  var auxSubPaths= path.split(',')\n  \n  var subPaths = \"\"\n  var x=0;\n   for(var i=0; i<auxSubPaths.length;i++){\n    if(/^\\d+$/.test(auxSubPaths[i+1])){\n      if(i===0){\n        subPaths=auxSubPaths[i]+\"[\"+auxSubPaths[i+1]+\"]\"\n      }else{\n        subPaths=subPaths+\".\"+auxSubPaths[i]+\"[\"+auxSubPaths[i+1]+\"]\"\n      }      //var newName = document.getElementById(\"newFolder\").value;\n      i++;\n      x++;\n    } //if string is num\n   }\n   console.log(\"NODESSS\",this.state.nodes[0])\n   console.log(\"SubPaths\",subPaths)\n   var arr = subPaths.split(\".\");\n   subPaths=\"\"\n   console.log(\"arrr\",arr)\n   if(flagFolderHome){\n    flagHome=true;\n    alert(\"Estas en el home\")\n   }else{\n    for(var i = 0; i<arr.length-1; i++){\n      if (i===0){\n        console.log(\"PASEEEE\")\n        subPaths = subPaths.concat(arr[i])\n      }else{\n        subPaths = subPaths.concat(\".\"+arr[i])\n      }\n    } console.log(\"SUBPATHSSSSSSS\",subPaths)\n    if(arr.length==1){\n     \n      eval(\"this.setState({here:this.state.nodes[0]})\")\n    }else{\n      eval(\"this.setState({here:this.state.nodes[0].\"+subPaths+\"})\")\n    }\n    \n   }\n   console.log(\"SubPaths2\",subPaths)\n   \n}\n\n\nsaveJson= async (children) => {\n  let msj=aes256.encrypt(this.state.key, JSON.stringify(this.state.nodes))\n  console.log(\"msj\",msj)\n\n        await fetch('api/file1/', { // Your POST endpoint\n          method: 'POST',\n          headers: {'Content-Type': 'application/json'},\n          body: JSON.stringify({ \"file\": {\n            \"content\" : msj,\n            \"name\" : \"kYS1cBJ6oqukp0KTeDScD7XHvh5WJF36nDk=\"\n          }})  // This is your file object\n        }).catch(function() {\n          console.log(\"error in post data\");\n          alert(\"recargue la pagina por favor\")\n        });\n }\n\n listChildren = (childrenHere,arr) =>{\n  console.log(\"child\", childrenHere)\n  //console.log(\"PRUEBA\",childrenHere.children)\n  if(childrenHere.children!== \"undefined\"){\n    for(var i=0; i<childrenHere.length;i++){\n      console.log(\"purueba if\", childrenHere[i].children === 'undefined')\n      if(childrenHere[i].isFolder === true){ //is folder\n        console.log(\"isfolder\")\n        console.log(\"PRUEBA\",childrenHere[i].children)\n        this.listChildren(childrenHere[i].children,arr)\n      }else{\n        arr.push(childrenHere[i].value)\n      }\n    }\n   }else{\n    console.log(\"here22\",childrenHere )\n     arr.push(childrenHere.value)\n   }\n  return arr\n }\n\n\n deleteElement = (valueFile,isFolder) => {\n  let childrenHere=this.state.here.children;\n  let children;\n  var arrToDelete = [];\n  for(var i=0;i<childrenHere.length;i++){\n   if(childrenHere[i].value===valueFile){\n     children=i;\n   }\n }\n  if(isFolder){\n   this.setState({listOfChildren:[]})\n  \n   arrToDelete = this.listChildren(childrenHere[children].children,[])\n  \n  }else{\n   arrToDelete[0]=valueFile;\n  }\n\n  var path = \"nodes\";\n  path = this.search(path, this.state.nodes, this.state.here);\n  let flagFolderHome = false;\n  console.log(\"path\",path)\n  path = path.replace(\"['value']\",\"\");\n  path = path.replace(\"nodes,0,\",\"\");\n  if(path.includes('nodes,0')){\n    flagFolderHome=true;\n  }\n  console.log(\"path2\",path)\n  var auxSubPaths= path.split(',')\n  console.log(\"auxSubPaths\",auxSubPaths)\n  var subPaths = \"\"\n  var x=0;\n  for(var i=0; i<auxSubPaths.length;i++){\n    if(/^\\d+$/.test(auxSubPaths[i+1])){\n      if(i===0){\n        subPaths=auxSubPaths[i]+\"[\"+auxSubPaths[i+1]+\"]\"\n      }else{\n        subPaths=subPaths+\".\"+auxSubPaths[i]+\"[\"+auxSubPaths[i+1]+\"]\"\n      }      \n      i++;\n      x++;\n    } //if string is num\n  }\n\n  var data = this.state.nodes[0];\n  console.log(\"subpth\", subPaths)\n  if(flagFolderHome){\n    eval(\"data.children[children]= {}\")\n  }else{\n    eval(\"data.\"+subPaths+\".children[children]= {}\")\n  }\n  this.clickInNewFolder()\n  this.clickInNewFolder()\n\n  setTimeout( \n    function() {\n    this.saveJson()\n    }\n    .bind(this),\n    3000\n  ); \n  console.log(\"arrToDelete\",arrToDelete)\n\n  fetch('/api/deleteFile', { // Your POST endpoint\n   method: 'POST',\n   headers: {'Content-Type': 'application/json'},\n   body: JSON.stringify(arrToDelete)\n   })\n   .then((response) => response.json())\n   .then((data) => {console.log(data)})\n   .catch(function() {\n     console.log(\"error in post data\");\n   });\n\n\n} \n\npaste = async () => {\nconsole.log(\"paste\")\n\n var path = \"nodes\";\n path = this.search(path, this.state.nodes, this.state.here);\n let flagFolderHome = false;\n console.log(\"path\",path)\n path = path.replace(\"['value']\",\"\");\n path = path.replace(\"nodes,0,\",\"\");\n if(path.includes('nodes,0')){\n   flagFolderHome=true;\n }\n console.log(\"path2\",path)\n var auxSubPaths= path.split(',')\n console.log(\"auxSubPaths\",auxSubPaths)\n var subPaths = \"\"\n var x=0;\n  for(var i=0; i<auxSubPaths.length;i++){\n   if(/^\\d+$/.test(auxSubPaths[i+1])){\n     if(i===0){\n       subPaths=auxSubPaths[i]+\"[\"+auxSubPaths[i+1]+\"]\"\n     }else{\n       subPaths=subPaths+\".\"+auxSubPaths[i]+\"[\"+auxSubPaths[i+1]+\"]\"\n     }      \n     i++;\n     x++;\n   } //if string is num\n  }\n\n   //var data = this.state.nodes[0];\n   var data = JSON.stringify(this.state.nodes);\n   console.log(\"DATAAA\",data)\n   console.log(\"PORTAPEEELLL\",this.state.portaPapel)\n   console.log(\"subpth\", subPaths)\n   var data2 = JSON.parse(data);\n   console.log(\"DATA22\",data2)\n   var here2;\n   if(flagFolderHome){\n     eval(\"data2[0].children[data2[0].children.length]= this.state.portaPapel\")\n     eval (\"this.setState({here:data2[0]})\")\n   }else{\n     eval(\"data2[0].\"+subPaths+\".children[data2[0].\"+subPaths+\".children.length]= this.state.portaPapel\")\n     eval(\"this.setState({here:data2[0].\"+subPaths+\"})\")\n   }\n   console.log(data2)\n   //await this.setState({here:here2})\n   console.log(\"HEREE 22\",this.state.here)\n   await this.setState({nodes:data2})\n   console.log(\"NODEESSS UPD\", this.state.nodes)\n\n}\n\ncopyElement = (element) => {\nconsole.log(\"HOLA VALE\",element)\n//element.value=\"copied\";\nthis.setState({portaPapel:element})\n}\n\neditName = (valueFile,newName) => {\nvar childrens = this.state.here.children;\nvar numChildren=0;\nfor(var i=0;i<childrens.length;i++){\n if(childrens[i].value===valueFile){\n   numChildren=i;\n }\n}\nconsole.log(\"numChildren\",numChildren)\nconsole.log(\"newname\",newName)\nvar path = \"nodes\";\npath = this.search(path, this.state.nodes, this.state.here);\nlet flagFolderHome = false;\nconsole.log(\"path\",path)\npath = path.replace(\"['value']\",\"\");\npath = path.replace(\"nodes,0,\",\"\");\nif(path.includes('nodes,0')){\n flagFolderHome=true;\n}\nconsole.log(\"path2\",path)\nvar auxSubPaths= path.split(',')\nconsole.log(\"auxSubPaths\",auxSubPaths)\nvar subPaths = \"\"\nvar x=0;\nfor(var i=0; i<auxSubPaths.length;i++){\n if(/^\\d+$/.test(auxSubPaths[i+1])){\n   if(i===0){\n     subPaths=auxSubPaths[i]+\"[\"+auxSubPaths[i+1]+\"]\"\n   }else{\n     subPaths=subPaths+\".\"+auxSubPaths[i]+\"[\"+auxSubPaths[i+1]+\"]\"\n   }      \n   i++;\n   x++;\n } //if string is num\n}\n\nvar data = this.state.nodes[0];\nconsole.log(\"subpth\", subPaths)\nif(flagFolderHome){\n eval(\"data.children[numChildren].label= newName\")\n}else{\n eval(\"data.\"+subPaths+\".children[numChildren].label= newName\")\n}\nthis.clickInNewFolder()\nthis.clickInNewFolder()\n\nsetTimeout( \n function() {\n this.saveJson()\n }\n .bind(this),\n 3000\n); \n}\n\nuploadFile = async () => {\nawait this.clickInLoad();\nsetTimeout( \n   function() {\n   var path = \"nodes\";\n   path = this.search(path, this.state.nodes, this.state.here);\n\n   var nameEncrypted =  this.state.nameEncrypted;\n   var nameF=  this.state.nameF;\n   console.log(\"NAMEEE\",this.state.nameF)\n   let newObj = {\n     value: nameEncrypted,\n     label: nameF,\n     isFolder:false\n   }\n   let flagFolderHome = false;\n   console.log(\"path\",path)\n   console.log(\"newobj\", newObj)\n   path = path.replace(\"['value']\",\"\");\n   path = path.replace(\"nodes,0,\",\"\");\n   if(path.includes('nodes,0')){\n     flagFolderHome=true;\n   }\n   console.log(\"path2\",path)\n   var auxSubPaths= path.split(',')\n   console.log(\"auxSubPaths\",auxSubPaths)\n   var subPaths = \"\"\n   var x=0;\n    for(var i=0; i<auxSubPaths.length;i++){\n     if(/^\\d+$/.test(auxSubPaths[i+1])){\n       if(i===0){\n         subPaths=auxSubPaths[i]+\"[\"+auxSubPaths[i+1]+\"]\"\n       }else{\n         subPaths=subPaths+\".\"+auxSubPaths[i]+\"[\"+auxSubPaths[i+1]+\"]\"\n       }      \n       i++;\n       x++;\n     } //if string is num\n    }\n\n     var data = this.state.nodes[0];\n     console.log(\"subpth\", subPaths)\n     if(flagFolderHome){\n       eval(\"data.children[data.children.length]= newObj\")\n     }else{\n       eval(\"data.\"+subPaths+\".children[data.\"+subPaths+\".children.length]= newObj\")\n     }\n     this.clickInNewFolder()\n     this.clickInNewFolder()\n     //this.setState({nodes:data})\n     setTimeout( \n       function() {\n       this.saveJson()\n       }\n       .bind(this),\n       3000\n     ); \n }\n .bind(this),\n 5000\n); \n}\n\ncallJSON = async () => {\n\nconst response = await fetch('/api/getFile/kYS1cBJ6oqukp0KTeDScD7XHvh5WJF36nDk=');\nconst body = await response.blob();\nif (response.status !== 200){\n console.log(\"ERRORRR\")\n alert(\"Por favor intente de nuevo\")\n}\nlet key = \"my passphrase;\"\nlet fileReader = new FileReader();\nlet content;\nfileReader.onloadend =  async function  (e){\n\n content = aes256.decrypt(key,fileReader.result);\n console.log(\"contentdes\", JSON.parse(content));\n console.log(\"nodes\",this.state.nodes)\n var fileDown =[];\n this.setState({nodes:JSON.parse(content)})\n console.log(\"nodes\",this.state.nodes)\n fileDown[0]=content;\n this.setState({here:this.state.nodes[0]});\n this.clickInNewFolder()\n this.clickInNewFolder()\n\n// download(content,filename,\"js\");\n   \n}.bind(this)\nfileReader.readAsText(body);\n\n}  \n\n\n\n\nrender() {\n  const childrenFolder = [];\n  const childrenFile = [];\n  var flagEmpty = false;\n\n  console.log(\"here\",this.state.here)\n    let auxChildren=this.state.here.children;\n    for (var i = 0; i < auxChildren.length; i += 1) {\n      \n      if(typeof auxChildren[i].children !== \"undefined\") {  // ES PADRE (Carpeta)\n\n        childrenFolder.push(<Col key={i} className=\"nodeCard \" sm=\"8\" md=\"3\"><Folder  number={i}  \n          children={auxChildren[i]}labelFile={auxChildren[i].label} \n          valueFile={auxChildren[i].label} changeHere={this.changeHere} /></Col>);\n        \n        flagEmpty = true;\n      }else{//Es un file\n\n        childrenFile.push(<Col key={i} className=\"nodeCard \" sm=\"8\" md=\"3\"><File  number={i}\n         labelFile={auxChildren[i].label} valueFile={auxChildren[i].label}/></Col>);\n        flagEmpty = true;\n      }\n        \n    };\n    if(!flagEmpty){\n      childrenFolder.push(<h2 key=\"empty\">\n        Folder Empty\n      </h2>)\n    }\n    childrenFolder.push(childrenFile);\n\n    return (\n      <div className=\"App\"> \n\n        <Navbar/>\n        \n        <Row>\n    <Col sm={2}>\n        <div className=\"md-form mb-3\">\n        <div className=\"md-form my-0\">\n        <input className=\"form-control mr-sm-2\" type=\"text\" placeholder=\"Search\" aria-label=\"Search\"></input>\n      </div>      \n        </div>\n\n        <div className=\"md-form mb-3\">\n        \n        <i className=\"far fa-clock\"> <strong>Recent</strong></i>\n        \n        </div>\n\n        <div className=\"md-form mb-3\">\n        <i className=\"fas fa-star\"> Destacada</i>\n        </div>\n        \n        <div className=\"md-form mb-3\">\n        <i className=\"fas fa-trash-alt\"> Papelera</i>\n        </div>\n        <hr className=\"my-5\"></hr>\n        <div className=\"md-form mb-3 \">\n        <i className=\"fas fa-server\">  Storage</i>\n        <MDBProgress value={25} className=\"my-2\" />\n        398.8 Mb of 5G used<br></br>\n       <a className=\"color\"> Increase storage</a>\n        </div>\n        </Col>\n    <Col sm={8}>     \n     <Row> \n     <Button color=\"light-blue\" className=\"boton2\" onClick={this.clickInNewFolder}><i className=\"fas fa-folder-plus\"></i> Create Folder</Button>\n          <Button color=\"light-blue\" className=\"boton\" onClick={this.saveJson}><i className=\"fas fa-save\"></i> Paste</Button>\n          <Button color=\"light-blue\" className=\"boton\" onClick={this.saveJson}><i className=\"fas fa-file-upload\"></i> File upload</Button>\n          <Button color=\"light-blue\" className=\"boton\" onClick={this.clickInBefore}><i className=\"fas fa-undo-alt\"></i> Back</Button>\n         \n          {/* <Col xs=\"4\">\n            <CheckboxTree\n              nodes={this.state.nodes}\n              checked={this.state.checked}\n              expanded={this.state.expanded}\n              onCheck={checked => this.setState({ checked })}\n              onExpand={expanded => this.setState({ expanded })}\n              onClick={clicked => this.selected(clicked)}\n            />\n          </Col> */}\n          <Col xs=\"12\">\n            <Row>\n          \n            {childrenFolder}\n            </Row>\n          </Col>\n        </Row>\n        </Col>\n  </Row>\n      <Container>\n\n      \n        <Modal isOpen={this.state.modalNewFolder} toggle={this.clickInNewFolder}>\n          <ModalHeader toggle={this.clickInNewFolder}>Create Folder</ModalHeader>\n          <ModalBody>\n          <FormGroup>\n            <Label for=\"newFolder\">Name of folder:</Label>\n            <Input type=\"text\" name=\"newFolder\" id=\"newFolder\" placeholder=\"New name\"/>\n          </FormGroup>\n          </ModalBody>\n          <ModalFooter>\n            <Button className=\"boton\" color=\"primary\"  onClick={this.createFolder}>Create</Button>{' '}\n            <Button className=\"boton\" color=\"secondary\" onClick={this.clickInNewFolder}>Cancel</Button>\n          </ModalFooter>\n        </Modal>\n        \n        {/* file */}\n\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <br></br>\n        <Button className=\"boton\" onClick={this.clickInLoad} color=\"primary\">primary</Button>{' '}\n        <input type=\"file\" id=\"inputUpload\" name=\"files[]\" multiple/> \n\n        <Button onClick={this.callFile} color=\"primary\">call file</Button>{' '}\n        \n\n      </Container>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}